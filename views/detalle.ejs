<%- include("templates/cabecera", {"tituloWeb":'Detalle de mascota'}) %>

    <div class="container">
        <% if (error) { %>
            <p class="text-center py-2 px-2 bg-danger text-white">
                <%= mensaje %>
            </p> 
        <% } %> 

        
        <% if (!error) { %> 
            
            <table class="table table-dark">
                <thead>
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Nombre</th>
                        <th scope="col">Descripción</th>
                        <th scope="col">Acción</th>
                    </tr>
                </thead>
                <tbody>
                            <tr>
                                <th scope="row"><%= mascota.id %> </th>
                                <td><%= mascota.nombre %> </td>
                                <td><%= mascota.descripcion %> </td>
                                <td><button class="btn btn-danger btn-sm" id="btnEliminar" data-id="<%= mascota.id %>">Eliminar</button></td>
                            </tr>
                </tbody>
            </table>
            <% } %>
            <a href="/mascotas" class="btn btn-info btn-block">Volver a Mascotas</a>
    </div>

<%- include('templates/footer') %>

<script>
    const botonEliminar = document.querySelector('#btnEliminar');
    botonEliminar.addEventListener('click', async ()=>{
    const id = botonEliminar.dataset.id  //capturamos el id que viene por data-id
    try{
        const data = await fetch(`/mascotas/${id}`, {method:'delete'})
        const res = await data.json()
        if (res.estado){
            window.location.href = '/mascotas';
        }
    }catch{

    }
    })
</script>